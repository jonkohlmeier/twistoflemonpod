---
layout: layouts/base.liquid
---

<article class="blog-post" itemscope itemtype="https://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title" itemprop="headline">{{ title }}</h1>
    <p class="post-date">
      <time datetime="{{ date | htmlDateString }}" itemprop="datePublished">{{ date | readableDate }}</time>
    </p>

    {% if enclosure and enclosure.url %}
      <div class="audio-player">
        <audio id="player" controls itemprop="audio">
          <source src="{{ enclosure.url }}" type="{{ enclosure.type | default: 'audio/mpeg' }}">
          Your browser does not support the audio element.
        </audio>
      </div>
    {% endif %}

    {% if episode %}
      {% assign transcript = collections | findTranscript: episode %}
      {% if transcript %}
        <p class="transcript-link">
          üìÑ <a href="{{ transcript.url }}">View Transcript</a>
        </p>
      {% endif %}
    {% endif %}
  </header>

  <section class="post-content" itemprop="articleBody">
    {{ content }}
  </section>

  <meta itemprop="author" content="{{ site.author.name }}">

  {% include "partials/tags.liquid", label: "tags", prefix: "tag", values: tags %}
  {% include "partials/tags.liquid", label: "categories", prefix: "category", values: categories %}
</article>

<nav class="post-navigation" aria-label="Post navigation">
  <div>
    {% if collections.blog %}
      {% assign previousPost = collections.blog | getPreviousCollectionItem: page %}
      {% if previousPost %}
        <a href="{{ previousPost.url }}" rel="prev">‚Üê {{ previousPost.data.title }}</a>
      {% endif %}
    {% endif %}
  </div>
  <div>
    {% if collections.blog %}
      {% assign nextPost = collections.blog | getNextCollectionItem: page %}
      {% if nextPost %}
        <a href="{{ nextPost.url }}" rel="next">{{ nextPost.data.title }} ‚Üí</a>
      {% endif %}
    {% endif %}
  </div>
</nav>

{% if enclosure and enclosure.url %}
<script src="/js/plyr.js"></script>
<link rel="stylesheet" href="/css/plyr.css">
<script>
  const player = new Plyr('#player', {
    controls: ['play', 'progress', 'current-time', 'duration', 'mute', 'volume', 'download']
  });
</script>
{% endif %}
